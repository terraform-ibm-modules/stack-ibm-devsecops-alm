{
  "inputs": [
    {
      "name": "region",
      "required": true,
      "type": "string",
      "hidden": false,
      "default": "us-south"
    },
    {
      "name": "en_region",
      "required": true,
      "type": "string",
      "hidden": false,
      "default": "us-south",
      "custom_config": {}
    },
    {
			"name": "app_repo_existing_url",
			"type": "string",
			"hidden": false,
			"default": "__NOTSET__",
			"required": true
		},
    {
      "name": "resource_group_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops-rg",
      "custom_config": {}
    },
    {
      "name": "bucket_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops"
    },
    {
      "name": "prefix",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops"
    },
    {
      "name": "use_existing_resource_group",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": ""
    },
    {
      "name": "ibmcloud_api",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": ""
    },
    {
      "name": "registry_namespace",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops"
    },
    {
      "name": "create_cd_instance",
      "required": false,
      "type": "boolean",
      "hidden": false,
      "default": true,
      "custom_config": {}
    },
    {
      "name": "sm_service_plan",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "standard",
      "custom_config": {}
    },
    {
      "name": "sm_secret_group",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops",
      "custom_config": {}
    },
    {
      "name": "cos_api_key_secret_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "cos-api-key",
      "custom_config": {}
    },
    {
      "name": "pipeline_ibmcloud_api_key_secret_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "ibmcloud-api-key",
      "custom_config": {}
    },
    {
      "name": "ci_signing_key_secret_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "signing-key",
      "custom_config": {}
    },
    {
      "name": "cd_code_signing_cert_secret_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "signing-certificate",
      "custom_config": {}
    },
		{
			"name": "app_repo_branch",
			"type": "string",
			"hidden": false,
			"default": "master",
			"required": false
		},
		{
			"name": "app_repo_git_token_secret_name",
			"type": "string",
			"hidden": false,
			"default": "",
			"required": false
		},
    {
			"name": "existing_secrets_manager_crn",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "__NULL__",
			"custom_config": {}
		},
    {
			"name": "create_icr_namespace",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": true,
			"custom_config": {}
		},
    {
			"name": "create_git_token",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": false,
			"custom_config": {}
		},
    {
      "name": "force_create_standard_api_key",
      "required": false,
      "type": "boolean",
      "hidden": false,
      "default": false,
      "custom_config": {}
    },
    {
			"name": "repo_git_token_secret_name",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
    {
			"name": "repo_git_token_secret_value",
			"required": false,
			"type": "password",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
    {
			"name": "repo_group",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
    {
			"name": "repo_apply_settings_to_compliance_repos",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": false,
			"custom_config": {}
		},
    {
			"name": "repo_git_provider",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "repo_title",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "repo_root_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "repo_blind_connection",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": false,
			"custom_config": {}
		},
		{
			"name": "repo_git_id",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "evidence_repo_existing_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "issues_repo_existing_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "inventory_repo_existing_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "cd_deployment_repo_existing_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "change_management_existing_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "create_triggers",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": true,
			"custom_config": {}
		},
    {
			"name": "create_git_triggers",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": true,
			"custom_config": {}
		},
		{
			"name": "compliance_pipeline_repo_use_group_settings",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": true,
			"custom_config": {}
		},
		{
			"name": "compliance_pipeline_repo_git_provider",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "compliance_pipeline_repo_git_id",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "compliance_pipeline_existing_repo_url",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
		{
			"name": "add_pipeline_definitions",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": true,
			"custom_config": {}
		},
    {
			"name": "create_privateworker_secret",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": false,
			"custom_config": {}
		},
    	{
			"name": "enable_privateworker",
			"required": false,
			"type": "boolean",
			"hidden": false,
			"default": false,
			"custom_config": {}
		},
   		{
			"name": "privateworker_credentials_secret_name",
			"required": false,
			"type": "string",
			"hidden": false,
			"default": "private-worker-key",
			"custom_config": {}
		},
    	{
			"name": "privateworker_secret_value",
			"required": false,
			"type": "password",
			"hidden": false,
			"default": "",
			"custom_config": {}
		},
    {
      "name": "toolchain_access_group_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "devsecops-toolchain",
      "custom_config": {}
    },
    {
      "name": "use_legacy_ref",
      "required": false,
      "type": "boolean",
      "hidden": false,
      "default": false,
      "custom_config": {}
    },
    {
      "name": "project_ci_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "CI_Project",
      "custom_config": {}
    },
    {
      "name": "project_cd_name",
      "required": false,
      "type": "string",
      "hidden": false,
      "default": "CD_Project",
      "custom_config": {}
    }
  ],
  "members": [
    {
      "inputs": [
        {
          "name": "resource_group_name",
          "value": "ref:../../inputs/resource_group_name"
        },
        {
          "name": "use_existing_resource_group",
          "value": "ref:../../inputs/use_existing_resource_group"
        },
        {
          "name": "region",
          "value": "ref:../../inputs/region"
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        }
      ],
      "name": "1 - Key Management",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.93bf5d12-a435-4510-8888-1c32db20b82b-global"
    },
    {
      "inputs": [
        {
          "name": "resource_group_name",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "use_existing_resource_group",
          "value": true
        },
        {
          "name": "instance_name",
          "value": "evidence"
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        }
      ],
      "name": "2 - Cloud Object Storage",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.30851389-2ab5-4be5-8674-7ef756cb372d-global"
    },
     {
      "inputs": [
        {
          "name": "bucket_name",
          "value": "ref:../../inputs/bucket_name"
        },
        {
          "name": "add_bucket_name_suffix",
          "value": true
        },
        {
          "name": "existing_cos_instance_id",
          "value": "ref:../../members/2 - Cloud Object Storage/outputs/cos_instance_id"
        },
        {
          "name": "existing_kms_instance_crn",
          "value": "ref:../../members/1 - Key Management/outputs/kms_instance_crn"
        },
        {
          "name": "skip_iam_authorization_policy",
          "value": false
        }
      ],
      "name": "3 - Cloud Object Bucket",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.993946ad-43d0-4774-929c-22954b20af95-global"
    },
    {
      "inputs": [
        {
          "name": "existing_cos_instance_crn",
          "value": "ref:../../members/2 - Cloud Object Storage/outputs/cos_instance_id"
        },
        {
          "name": "enable_collecting_failed_events",
          "value": true
        },
        {
					"name": "kms_encryption_enabled",
					"value": true
				},
        {
          "name": "kms_endpoint_url",
          "value": "ref:../../members/1 - Key Management/outputs/kms_private_endpoint"
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
          "name": "existing_kms_instance_crn",
          "value": "ref:../../members/1 - Key Management/outputs/kms_instance_crn"
        },
        {
          "name": "kms_endpoint_type",
          "value": "private"
        },
        {
          "name": "existing_resource_group_name",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "region",
          "value": "ref:../../inputs/en_region"
        }
      ],
      "name": "4 - Event Notifications",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.fa8ebdf4-db44-4e25-9846-9278b516cd73-global"
    },
    {
      "inputs": [
        {
          "name": "existing_resource_group_name",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "use_existing_resource_group",
          "value": true
        },
        {
          "name": "region",
          "value": "ref:../../inputs/region"
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
					"name": "existing_secrets_manager_crn",
					"value": "ref:../../inputs/existing_secrets_manager_crn"
				},
        {
          "name": "existing_kms_instance_crn",
          "value": "ref:../../members/1 - Key Management/outputs/kms_instance_crn"
        },
        {
          "name": "existing_event_notification_instance_crn",
          "value": "ref:../../members/4 - Event Notifications/outputs/crn"
        },
        {
          "name": "service_plan",
          "value": "ref:../../inputs/sm_service_plan"
        }
      ],
      "name": "5 - Secrets Manager",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.3d0da0a9-0327-44fc-8796-edf8e0017e25-global"
    },
    {
      "name": "6 - DevSecOps Toolchains",
      "version_locator": "1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc.9b435db4-ec9c-4d54-baab-210b9627b96c-global",
      "inputs": [
        {
          "name": "ibmcloud_api_key",
          "value": ""
        },
        {
          "name": "toolchain_region",
          "value": "ref:../../inputs/region"
        },
        {
          "name": "toolchain_resource_group",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "sm_secret_group",
          "value": "ref:../../inputs/sm_secret_group"
        },
        {
          "name": "sm_resource_group",
          "value": "ref:../../members/5 - Secrets Manager/outputs/resource_group_name"
        },
        {
          "name": "sm_name",
          "value": "ref:../../members/5 - Secrets Manager/outputs/secrets_manager_name"
        },
        {
          "name": "sm_location",
          "value": "ref:../../members/5 - Secrets Manager/outputs/secrets_manager_region"
        },
        {
          "name": "repositories_prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
          "name": "event_notifications_crn",
          "value": "ref:../../members/4 - Event Notifications/outputs/crn"
        },
        {
          "name": "enable_cos",
          "value" : "true"
        },
        {
          "name": "cos_bucket_name",
          "value": "ref:../../members/3 - Cloud Object Bucket/outputs/bucket_name"
        },
        {
          "name": "cos_endpoint",
          "value": "ref:../../members/3 - Cloud Object Bucket/outputs/s3_endpoint_direct"
        },
        {
          "name": "cos_instance_crn",
          "value": "ref:../../members/2 - Cloud Object Storage/outputs/cos_instance_id"
        },
        {
					"name" : "ibmcloud_api",
					"value" : "ref:../../inputs/ibmcloud_api"
				},
        {
          "name": "registry_namespace",
          "value": "ref:../../inputs/registry_namespace"
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
          "name": "add_container_name_suffix",
          "value": "true"
        },
        {
					"name": "create_icr_namespace",
					"value": "ref:../../inputs/create_icr_namespace"
				},
        {
          "name": "create_cd_instance",
          "value": "ref:../../inputs/create_cd_instance"
        },
        {
          "name": "create_secret_group",
          "value": true
        },
        {
          "name": "create_ibmcloud_api_key",
          "value": true
        },
        {
          "name": "create_cos_api_key",
          "value": true
        },
        {
          "name": "create_signing_key",
          "value": true
        },
        {
          "name": "create_access_group",
          "value": true
        },
        {
          "name": "pipeline_ibmcloud_api_key_secret_name",
          "value": "ref:../../inputs/pipeline_ibmcloud_api_key_secret_name"
        },
        {
          "name": "ci_signing_key_secret_name",
          "value": "ref:../../inputs/ci_signing_key_secret_name"
        },
        {
          "name": "cd_code_signing_cert_secret_name",
          "value": "ref:../../inputs/cd_code_signing_cert_secret_name"
        },
        {
          "name": "cos_api_key_secret_name",
          "value": "ref:../../inputs/cos_api_key_secret_name"
        },
        {
					"name": "force_create_standard_api_key",
					"value": "ref:../../inputs/force_create_standard_api_key"
				},
        {
          "name": "create_git_token",
          "value": "ref:../../inputs/create_git_token"
        },
        {
          "name": "repo_git_token_secret_name",
          "value": "ref:../../inputs/repo_git_token_secret_name"
        },
        {
          "name": "repo_git_token_secret_value",
          "value": "ref:../../inputs/repo_git_token_secret_value"
        },
        {
          "name": "repo_group",
          "value": "ref:../../inputs/repo_group"
        },
        {
          "name": "repo_apply_settings_to_compliance_repos",
          "value": "ref:../../inputs/repo_apply_settings_to_compliance_repos"
        },
        {
          "name": "repo_git_provider",
          "value": "ref:../../inputs/repo_git_provider"
        },
        {
          "name": "repo_title",
          "value": "ref:../../inputs/repo_title"
        },
        {
          "name": "repo_root_url",
          "value": "ref:../../inputs/repo_root_url"
        },
        {
          "name": "repo_blind_connection",
          "value": "ref:../../inputs/repo_blind_connection"
        },
        {
          "name": "repo_git_id",
          "value": "ref:../../inputs/repo_git_id"
        },
        {
					"name": "app_repo_existing_url",
					"value": "ref:../../inputs/app_repo_existing_url"
				},
        {
          "name": "evidence_repo_existing_url",
          "value": "ref:../../inputs/evidence_repo_existing_url"
        },
        {
          "name": "issues_repo_existing_url",
          "value": "ref:../../inputs/issues_repo_existing_url"
        },
        {
          "name": "inventory_repo_existing_url",
          "value": "ref:../../inputs/inventory_repo_existing_url"
        },
        {
          "name": "cd_deployment_repo_existing_url",
          "value": "ref:../../inputs/cd_deployment_repo_existing_url"
        },
        {
          "name": "change_management_existing_url",
          "value": "ref:../../inputs/change_management_existing_url"
        },
        {
          "name": "create_triggers",
          "value": "ref:../../inputs/create_triggers"
        },
        {
          "name": "create_git_triggers",
          "value": "ref:../../inputs/create_git_triggers"
        },
        {
          "name": "compliance_pipeline_repo_use_group_settings",
          "value": "ref:../../inputs/compliance_pipeline_repo_use_group_settings"
        },
        {
          "name": "compliance_pipeline_repo_git_provider",
          "value": "ref:../../inputs/compliance_pipeline_repo_git_provider"
        },
        {
          "name": "compliance_pipeline_repo_git_id",
          "value": "ref:../../inputs/compliance_pipeline_repo_git_id"
        },
        {
          "name": "compliance_pipeline_existing_repo_url",
          "value": "ref:../../inputs/compliance_pipeline_existing_repo_url"
        },
        {
          "name": "add_pipeline_definitions",
          "value": "ref:../../inputs/add_pipeline_definitions"
        },
				{
					"name": "create_privateworker_secret",
					"value": "ref:../../inputs/create_privateworker_secret"
				},
				{
					"name": "enable_privateworker",
					"value": "ref:../../inputs/enable_privateworker"
				},
				{
					"name": "privateworker_credentials_secret_name",
					"value": "ref:../../inputs/privateworker_credentials_secret_name"
				},
				{
					"name": "privateworker_secret_value",
					"value": "ref:../../inputs/privateworker_secret_value"
				},
				{
					"name": "toolchain_access_group_name",
					"value": "ref:../../inputs/toolchain_access_group_name"
				},
        {
					"name": "use_legacy_ref",
					"value": "ref:../../inputs/use_legacy_ref"
				},
        {
          "name": "ci_code_engine_project",
          "value": "ref:../../inputs/project_ci_name"
        },
        {
          "name": "cd_code_engine_project",
          "value": "ref:../../inputs/project_cd_name"
        },
        {
          "name": "use_app_repo_for_cd_deploy",
          "value": true
        }
      ]
    },
    {
      "inputs": [
        {
          "name": "resource_group_name",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "existing_resource_group",
          "value": true
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
          "name": "project_name",
          "value": "ref:../../inputs/project_ci_name"
        }
      ],
      "name": "7a - Code Engine CI Project",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.b82c8a79-20a1-49b5-8ec8-92d571a54e1b-global"
    },
    {
      "inputs": [
        {
          "name": "resource_group_name",
          "value": "ref:../../members/1 - Key Management/outputs/resource_group_name"
        },
        {
          "name": "existing_resource_group",
          "value": true
        },
        {
          "name": "prefix",
          "value": "ref:../../inputs/prefix"
        },
        {
          "name": "project_name",
          "value": "ref:../../inputs/project_cd_name"
        }
      ],
      "name": "7b - Code Engine CD Project",
      "version_locator": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3.b82c8a79-20a1-49b5-8ec8-92d571a54e1b-global"
    }
  ],
  "outputs": [
    {
      "name": "compliance-ci-toolchain",
      "value": "ref:./members/6 - DevSecOps Toolchains/outputs/compliance_ci_toolchain_url"
    },
    {
      "name": "compliance-cd-toolchain",
      "value": "ref:./members/6 - DevSecOps Toolchains/outputs/compliance_cd_toolchain_url"
    },
    {
      "name": "compliance-cc-toolchain",
      "value": "ref:./members/6 - DevSecOps Toolchains/outputs/compliance_cc_toolchain_url"
    }
  ]
}
